<!DOCTYPE html>
<html>

  <!-- -------------------------------------------------------------------- -->
  <!-- Head -->
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
      body, h1,h2,h3,h4,h5,h6 {font-family: "Montserrat", sans-serif}
      .w3-row-padding img {margin-bottom: 12px}
      #main {margin-left: 60px; margin-right:60px}
      /* Remove margins from "page content" on small screens */
      @media only screen and (max-width: 600px) {#main {margin-left: 0; margin-right: 0;}}
    </style>
    <title>YARR Raytracer Web Demo</title>
  </head>
  
  <!-- -------------------------------------------------------------------- -->
  <!-- Body -->
  <body class="w3-black">
    <div class="w3-padding-large" id="main">

      <!-- -------------------------------------------------------------------- -->
      <!-- Header -->
      <header class="w3-container w3-padding-32 w3-center w3-black" id="home">
        <h1 class="w3-jumbo"><span class="w3-hide-small"></span>YARR Demo</h1>
        <p>Raytracing powered by WebAssembly</p>
        <p>Visit the project page and get the source here:<br /><a href="https://github.com/KhoiFish/yarr">YARR GitHub</a></p>
      </header>

      <!-- -------------------------------------------------------------------- -->
      <!-- Parameters -->
      <div class="w3-bar w3-border w3-dark-grey" id="parameters">

        <!-- UI helper functions -->
        <script>
          function toggleButtonShow(id) {
            var x = document.getElementById(id);
            if (x.className.indexOf("w3-show") == -1) { 
              x.className += " w3-show";
            } else {
              x.className = x.className.replace(" w3-show", "");
            }
          }
          function paramSelect(buttonId, outputId, num) {
            document.getElementById(outputId).value = num;
            toggleButtonShow(buttonId);
          }
        </script>
        
        <!-- Scene Selection -->
        <div class="w3-dropdown-click" style="width:25%">
          <button class="w3-button w3-white" style="width:100%" onclick="toggleButtonShow('sceneDropDown'); return false;">Scene</button>
          <div id="sceneDropDown" class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="#scene" class="w3-bar-item w3-button" onclick="paramSelect('sceneDropDown', 'sceneNum', '0'); return false;">0 - 1st Week - Final</a>
            <a href="#scene" class="w3-bar-item w3-button" onclick="paramSelect('sceneDropDown', 'sceneNum', '1'); return false;">1 - 2nd Week - 4.1</a>
            <a href="#scene" class="w3-bar-item w3-button" onclick="paramSelect('sceneDropDown', 'sceneNum', '2'); return false;">2 - 2nd Week - 5.1</a>
            <a href="#scene" class="w3-bar-item w3-button" onclick="paramSelect('sceneDropDown', 'sceneNum', '3'); return false;">3 - 2nd Week - 6.2</a>
            <a href="#scene" class="w3-bar-item w3-button" onclick="paramSelect('sceneDropDown', 'sceneNum', '4'); return false;">4 - 2nd Week - 7.4</a>
            <a href="#scene" class="w3-bar-item w3-button" onclick="paramSelect('sceneDropDown', 'sceneNum', '5'); return false;">5 - 2nd Week - 7.6</a>
            <a href="#scene" class="w3-bar-item w3-button" onclick="paramSelect('sceneDropDown', 'sceneNum', '6'); return false;">6 - 2nd Week - 8.0</a>
            <a href="#scene" class="w3-bar-item w3-button" onclick="paramSelect('sceneDropDown', 'sceneNum', '7'); return false;">7 - 2nd Week - 8.2</a>
            <a href="#scene" class="w3-bar-item w3-button" onclick="paramSelect('sceneDropDown', 'sceneNum', '8'); return false;">8 - 2nd Week - 9.1</a>
            <a href="#scene" class="w3-bar-item w3-button" onclick="paramSelect('sceneDropDown', 'sceneNum', '9'); return false;">9 - 2nd Week - Final</a>
          </div>
        </div>

        <!-- Num Samples -->
        <div class="w3-dropdown-click" style="width:25%">
          <button class="w3-button w3-white" style="width:100%" onclick="toggleButtonShow('samplesDropDown'); return false;">Samples</button>
          <div id="samplesDropDown" class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="#samples" class="w3-bar-item w3-button" onclick="paramSelect('samplesDropDown', 'samplesNum', '1'); return false;">1</a>
            <a href="#samples" class="w3-bar-item w3-button" onclick="paramSelect('samplesDropDown', 'samplesNum', '10'); return false;">10</a>
            <a href="#samples" class="w3-bar-item w3-button" onclick="paramSelect('samplesDropDown', 'samplesNum', '32'); return false;">32</a>
            <a href="#samples" class="w3-bar-item w3-button" onclick="paramSelect('samplesDropDown', 'samplesNum', '50'); return false;">50</a>
            <a href="#samples" class="w3-bar-item w3-button" onclick="paramSelect('samplesDropDown', 'samplesNum', '100'); return false;">100</a>
            <a href="#samples" class="w3-bar-item w3-button" onclick="paramSelect('samplesDropDown', 'samplesNum', '200'); return false;">200</a>
            <a href="#samples" class="w3-bar-item w3-button" onclick="paramSelect('samplesDropDown', 'samplesNum', '500'); return false;">500</a>
            <a href="#samples" class="w3-bar-item w3-button" onclick="paramSelect('samplesDropDown', 'samplesNum', '1000'); return false;">1000</a>
            <a href="#samples" class="w3-bar-item w3-button" onclick="paramSelect('samplesDropDown', 'samplesNum', '5000'); return false;">5000</a>
            <a href="#samples" class="w3-bar-item w3-button" onclick="paramSelect('samplesDropDown', 'samplesNum', '10000'); return false;">10000</a>
          </div>
        </div>

        <!-- Max Depth -->
        <div class="w3-dropdown-click" style="width:25%">
          <button class="w3-button w3-white" style="width:100%" onclick="toggleButtonShow('maxDepthDropDown'); return false;">Depth</button>
          <div id="maxDepthDropDown" class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="#maxDepth" class="w3-bar-item w3-button" onclick="paramSelect('maxDepthDropDown', 'maxDepthNum', '1'); return false;">1</a>
            <a href="#maxDepth" class="w3-bar-item w3-button" onclick="paramSelect('maxDepthDropDown', 'maxDepthNum', '10'); return false;">10</a>
            <a href="#maxDepth" class="w3-bar-item w3-button" onclick="paramSelect('maxDepthDropDown', 'maxDepthNum', '32'); return false;">32</a>
            <a href="#maxDepth" class="w3-bar-item w3-button" onclick="paramSelect('maxDepthDropDown', 'maxDepthNum', '50'); return false;">50</a>
            <a href="#maxDepth" class="w3-bar-item w3-button" onclick="paramSelect('maxDepthDropDown', 'maxDepthNum', '100'); return false;">100</a>
          </div>
        </div>

        <!-- BVH -->
        <div class="w3-dropdown-click" style="width:25%">
          <button class="w3-button w3-white" style="width:100%" onclick="toggleButtonShow('bvhDropDown'); return false;">BVH</button>
          <div id="bvhDropDown" class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="#enableBvh" class="w3-bar-item w3-button" onclick="paramSelect('bvhDropDown', 'bvhEnable', 'true'); return false;">true</a>
            <a href="#enableBvh" class="w3-bar-item w3-button" onclick="paramSelect('bvhDropDown', 'bvhEnable', 'false'); return false;">false</a>
          </div>
        </div>
      </div>

      <!-- -------------------------------------------------------------------- -->
      <!-- Render Buttons -->
      <div class="w3-bar w3-border w3-dark-grey" id="buttons">
        <button class="w3-bar-item w3-button" style="width:25%" id="singleThreadBtn" value="Single-thread" disabled>Single-thread</button>
        <button class="w3-bar-item w3-button" style="width:25%" id="multiThreadBtn" value="Rayon multi-threads" disabled>Rayon threads</button>
        <button class="w3-bar-item w3-button" style="width:25%" id="manualWebWorkers" value="Manual web workers" disabled>Web workers</button>
        <button class="w3-bar-item w3-button" style="width:25%" id="manualWebWorkersPreview" value="Preview (web workers)" disabled>Preview render</button>
      </div>

      <!-- -------------------------------------------------------------------- -->
      <!-- Parameter Info -->
      <div class="w3-bar w3-border w3-dark-grey" id="paramInfo">  
        <div align="center">
          <label id="sceneNumTitle">Scene: </label>
          <output id="sceneNum">0</output>

          <p style="display:inline"> | </p>
          <label id="samplesNumTitle">Samples: </label>
          <output id="samplesNum">32</output>

          <p style="display:inline"> | </p>
          <label id="maxDepthNumTitle">Ray Depth: </label>
          <output id="maxDepthNum">50</output>

          <p style="display:inline"> | </p>
          <label id="bvhEnableTitle">BVH: </label>
          <output id="bvhEnable">false</output>

          <p style="display:inline"> | </p>
          <label id="numThreadsTitle">Num Threads: </label>
          <output id="numThreads">8</output>

          <p style="display:inline"> | </p>
          <label id="timeTitle">Render time: </label>
          <output id="time">N/A</output>
        </div>
      </div>
      <br />

      <!-- -------------------------------------------------------------------- -->
      <!-- Canvas -->
      <p align="center">
        <canvas id="canvas" width="512" height="512"></canvas>
      </p>
      
      <!-- -------------------------------------------------------------------- -->
      <!-- Main Script Include -->
      <script type="module" src="index.js"></script>

    </div>
  </body>
</html>
